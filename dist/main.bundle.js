(()=>{"use strict";var e,t,n,d,o,l,r={475:(e,t,n)=>{n.d(t,{d:()=>d});const d={NUM_SELECTIONS:2,NUM_OBJECTS:10,NUM_MAIN_TRIALS:15,NUM_EDUCATION_TRIALS:2,AI_HELP:0,isEasyMode:!1,needRetry:!1,retryCnt:0,curTrial:0,isDebugMode:!1,randomGenerator:null,centerX:0,centerY:0,totalFrames:0,animationFrameId:0,animationStartTime:0,objects:[],lastRoundObjects:[],selectedObjects:[],hoverObjectIndex:-1,speedMultiplier:1,player:{x0:0,y0:0,radius:15,speed:0,dX:0,dY:0,x:0,y:0},permutations:[],allSolutions:null,bestSolution:null,playerSolution:null,interceptionCounter:0,interceptionFrame:0,canShowRequestAI:!1,canShowAnswer:!1}},799:(e,t,n)=>{n.d(t,{Iz:()=>a,PL:()=>y,Qd:()=>u,W3:()=>c,j2:()=>p,lx:()=>l,mH:()=>d,mu:()=>o,rm:()=>r,ue:()=>s,vh:()=>i});const d=60,o=Math.round(d/1e3*3e3),l=(Math.round(d/1e3*2e3),1),r=60,i=120,a=1,s=2,c=400,u=30,p=12345,y=new Image;y.src=new URL(n(901),n.b).href},803:(e,t,n)=>{n.r(t),n.d(t,{enumerateAllSolutions:()=>u,generatePermutations:()=>s,lookupInterceptionPaths:()=>c});var d=n(475),o=n(799);function l(e,t,n,l,s,c,u,p){let y,m,f,h,I=!1,b=1/0,x=NaN,g=NaN;if(!e)return[y,m,f,h]=r(t,n,s,c,u,p),[I,y,m,f,h];let[v,E,S]=a(u**2+p**2-l**2,2*((s-t)*u+(c-n)*p),(s-t)**2+(c-n)**2);return v?(b=E>=0&&(E<S||S<0)?E:S>=0?S:1/0,b===1/0?([y,m,f,h]=r(t,n,s,c,u,p),[I,y,m,f,h]):(x=s+b*u,g=c+b*p,[y,m,f,h]=i(t,n,(x-t)/Math.round(b),(g-n)/Math.round(b),s,c,u,p),M=x,L=g,I=Math.sqrt((M-d.d.centerX)**2+(L-d.d.centerY)**2)<=o.W3,I?h=0:(x=m,g=f,b=y),[I,b,x,g,h])):([y,m,f,h]=r(t,n,s,c,u,p),[I,y,m,f,h]);var M,L}function r(e,t,n,d,o,l){return i(e,t,0,0,n,d,o,l)}function i(e,t,n,l,r,i,s,c){Math.abs(n)<1e-6&&Math.abs(l)<1e-6&&([n,l]=function(e,t,n,d){let o=n-e,l=d-t,r=Math.sqrt(o**2+l**2);return r>1e-6?[o/r,l/r]:[0,0]}(e,t,r,i));let[u,p,y]=function(e,t,n,l){let r=d.d.centerX,i=d.d.centerY,s=Math.sqrt((e-r)**2+(t-i)**2);if(Math.abs(s-o.W3)<1e-6)return[0,e,t];let[c,u,p]=a(n**2+l**2,2*((e-r)*n+(t-i)*l),(e-r)**2+(t-i)**2-o.W3**2);if(!c)return[1/0,NaN,NaN];let y=u>=0&&(u<p||p<0)?u:p>=0?p:1/0;return y===1/0?[1/0,NaN,NaN]:[y,e+y*n,t+y*l]}(e,t,n,l),m=r+u*s,f=i+u*c;return[u,p,y,Math.sqrt((m-p)**2+(f-y)**2)]}function a(e,t,n){let d=t**2-4*e*n;if(d<0)return[!1,NaN,NaN];let o=Math.sqrt(d);return[!0,(-t+o)/(2*e),(-t-o)/(2*e)]}function s(e,t){const n=[];return function d(o){if(o.length!==t)for(let t=0;t<e.length;t++)o.includes(e[t])||d([...o,e[t]]);else n.push([...o])}([]),n}function c(){for(let e=0;e<d.d.NUM_SELECTIONS;e++)console.log(`Object selected ${e} = ${d.d.selectedObjects[e]}`);const e=(t=d.d.permutations,n=d.d.selectedObjects,t.findIndex((e=>e.length===n.length&&e.every(((e,t)=>e===n[t])))));var t,n;let o;return console.log(`Matching index: ${e}`),-1!==e?(console.log("Matching permutation:",d.d.permutations[e]),o=d.d.allSolutions[e]):console.log("No matching permutation found."),o}function u(){const e=d.d.permutations.length;let t=[];for(let n=0;n<e;n++){let e=d.d.permutations[n],o=structuredClone(d.d.objects),r=structuredClone(d.d.player),i=0,a=[],s=!0;for(let t=0;t<d.d.NUM_SELECTIONS;t++){const n=o[e[t]];let[d,c,u,m,f]=l(s,r.x,r.y,r.speed,n.x,n.y,n.dX,n.dY);if(s){let e=p(d,c,r,u,m,o);a.push(e)}i+=y(n,d,f,t),!d&&s&&(s=!1)}let c=0,u=0,m=0;for(let e=0;e<a.length;e++)a[e].success&&u++;let f={sequence:e,totalValue:i,moves:a,rank:m,interceptedCnt:u,totalValueProp:c};t.push(f)}return function(e){e.forEach(((e,t)=>e.originalIndex=t)),e.sort(((e,t)=>t.totalValue-e.totalValue));let t=e[0].totalValue,n=1;for(let d=0;d<e.length;d++)e[d].totalValueProp=e[d].totalValue/t,d>0&&e[d].totalValue===e[d-1].totalValue?e[d].rank=e[d-1].rank:e[d].rank=n,n++;d.d.permutations=e.map((e=>d.d.permutations[e.originalIndex])),e.forEach((e=>delete e.originalIndex))}(t),d.d.isDebugMode&&function(e){console.log("\nðŸ”¹ All Solutions Summary:");let t=e[0].totalValue;e.forEach(((e,t)=>{console.log(`${t}: Sequence ${e.sequence}, Score: ${e.totalValue.toFixed(3)}, Rank:${e.rank}, Intercepted Cnt:${e.interceptedCnt}`)})),console.log(`\nðŸ† Best solution = ${e[0].sequence}, maxValue = ${t.toFixed(3)}`)}(t),[t,t[0]]}function p(e,t,n,d,o,l){let r={success:e};t=Math.round(t),r.timeToIntercept=t,r.dX=(d-n.x)/t,r.dY=(o-n.y)/t,n.x+=t*r.dX,n.y+=t*r.dY,r.interceptPosX=n.x,r.interceptPosY=n.y;for(let e of l)e.x+=t*e.dX,e.y+=t*e.dY;return r}function y(e,t,n,d){if(t)return e.value;let l=0==d?.75:.25;return(2*o.W3-n)/(2*o.W3)*e.value*l}},901:(e,t,n)=>{e.exports=n.p+"e7555fa2d571e29a1295.png"},914:(e,t,n)=>{n.d(t,{K:()=>d});const d={prolific_pid:"",create_time:new Date,end_time:new Date,feedback:0,experiments:[]}}},i={};function a(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={exports:{}};return r[e](n,n.exports,a),n.exports}a.m=r,e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",d=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},a.a=(o,l,r)=>{var i;r&&((i=[]).d=-1);var a,s,c,u=new Set,p=o.exports,y=new Promise(((e,t)=>{c=t,s=e}));y[t]=p,y[e]=e=>(i&&e(i),u.forEach(e),y.catch((e=>{}))),o.exports=y,l((o=>{var l;a=(o=>o.map((o=>{if(null!==o&&"object"==typeof o){if(o[e])return o;if(o.then){var l=[];l.d=0,o.then((e=>{r[t]=e,d(l)}),(e=>{r[n]=e,d(l)}));var r={};return r[e]=e=>e(l),r}}var i={};return i[e]=e=>{},i[t]=o,i})))(o);var r=()=>a.map((e=>{if(e[n])throw e[n];return e[t]})),s=new Promise((t=>{(l=()=>t(r)).r=0;var n=e=>e!==i&&!u.has(e)&&(u.add(e),e&&!e.d&&(l.r++,e.push(l)));a.map((t=>t[e](n)))}));return l.r?s:r()}),(e=>(e?c(y[n]=e):s(p),d(i)))),i&&i.d<0&&(i.d=0)},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,n)=>(a.f[n](e,t),t)),[])),a.u=e=>e+".bundle.js",a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o={},l="demo:",a.l=(e,t,n,d)=>{if(o[e])o[e].push(t);else{var r,i;if(void 0!==n)for(var s=document.getElementsByTagName("script"),c=0;c<s.length;c++){var u=s[c];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==l+n){r=u;break}}r||(i=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,a.nc&&r.setAttribute("nonce",a.nc),r.setAttribute("data-webpack",l+n),r.src=e),o[e]=[t];var p=(t,n)=>{r.onerror=r.onload=null,clearTimeout(y);var d=o[e];if(delete o[e],r.parentNode&&r.parentNode.removeChild(r),d&&d.forEach((e=>e(n))),t)return t(n)},y=setTimeout(p.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=p.bind(null,r.onerror),r.onload=p.bind(null,r.onload),i&&document.head.appendChild(r)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="",(()=>{a.b=document.baseURI||self.location.href;var e={792:0};a.f.j=(t,n)=>{var d=a.o(e,t)?e[t]:void 0;if(0!==d)if(d)n.push(d[2]);else{var o=new Promise(((n,o)=>d=e[t]=[n,o]));n.push(d[2]=o);var l=a.p+a.u(t),r=new Error;a.l(l,(n=>{if(a.o(e,t)&&(0!==(d=e[t])&&(e[t]=void 0),d)){var o=n&&("load"===n.type?"missing":n.type),l=n&&n.target&&n.target.src;r.message="Loading chunk "+t+" failed.\n("+o+": "+l+")",r.name="ChunkLoadError",r.type=o,r.request=l,d[1](r)}}),"chunk-"+t,t)}};var t=(t,n)=>{var d,o,[l,r,i]=n,s=0;if(l.some((t=>0!==e[t]))){for(d in r)a.o(r,d)&&(a.m[d]=r[d]);i&&i(a)}for(t&&t(n);s<l.length;s++)o=l[s],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0},n=globalThis.webpackChunkdemo=globalThis.webpackChunkdemo||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),a.d({},{z:()=>K});const s=document.getElementById("experimentContainer"),c=document.getElementById("gameCanvas"),u=c.getContext("2d"),p=(document.getElementById("info"),document.getElementById("infoContent")),y=document.getElementById("aiInfoContent"),m=document.getElementById("aiInfo"),f=(document.getElementById("resultInfo"),document.getElementById("resultInfoContent")),h=document.getElementById("startButton"),I=document.getElementById("replayButton"),b=document.getElementById("reselectButton"),x=document.getElementById("interceptionButton"),g=document.getElementById("finishButton"),v=document.getElementById("aiRequest"),E=document.getElementById("consentContainer"),S=document.getElementById("instructionsContainer"),M=document.getElementById("modalContainer"),L=document.getElementById("feedbackContainer");var w=a(799),T=a(475),k=a(914),N=a(803);function P(){T.d.objects.forEach(((e,t)=>{if(!e.isIntercepted){if(t===T.d.hoverObjectIndex&&(u.beginPath(),u.arc(e.x,e.y,e.radius+5,0,2*Math.PI),u.fillStyle="rgba(255, 0, 0, 0.3)",u.fill()),u.beginPath(),u.arc(e.x,e.y,e.radius*e.value,0,2*Math.PI),u.fillStyle="red",u.fill(),T.d.isDebugMode){u.textAlign="center",u.textBaseline="middle",u.fillStyle="rgb(0, 0, 0)";let n=20;u.font=`${n}px Arial`,u.fillText(t,e.x,e.y)}if(u.beginPath(),u.arc(e.x,e.y,e.radius,0,2*Math.PI),u.lineWidth=3,u.strokeStyle="red",u.stroke(),e.isSelected){const t=e.selectionIndex;u.fillStyle="black",u.font="24px Arial",u.fillText(t+1,e.x+e.radius+14,e.y+8)}if(T.d.canShowRequestAI||T.d.canShowAnswer){let n=T.d.bestSolution.sequence.indexOf(t);-1!==n&&(u.fillStyle="blue",u.font="24px Arial",u.fillText(n+1,e.x-e.radius-20,e.y+8))}}})),T.d.objects.forEach((e=>{if(!e.isIntercepted){const t=Math.sqrt(e.dX**2+e.dY**2)*w.Qd,n=Math.atan2(e.dY,e.dX),d=e.x,o=e.y,l=d+t*Math.cos(n),r=o+t*Math.sin(n);u.beginPath(),u.moveTo(d,o),u.lineTo(l,r),u.lineWidth=2,u.strokeStyle="gray",u.stroke();const i=12,a=Math.PI/6,s=l-i*Math.cos(n-a),c=r-i*Math.sin(n-a),p=l-i*Math.cos(n+a),y=r-i*Math.sin(n+a);u.beginPath(),u.moveTo(l,r),u.lineTo(s,c),u.lineTo(p,y),u.closePath(),u.fillStyle="gray",u.fill()}}))}function _(){if(w.PL.complete&&0!==w.PL.naturalWidth){const e=50,t=50;u.drawImage(w.PL,T.d.player.x-e/2,T.d.player.y-t/2,e,t)}else u.beginPath(),u.arc(T.d.player.x,T.d.player.y,T.d.player.radius,0,2*Math.PI),u.fillStyle="blue",u.fill()}function A(){T.d.centerX=c.width/2,T.d.centerY=c.height/2,u.save(),u.beginPath(),u.arc(T.d.centerX,T.d.centerY,w.W3,0,2*Math.PI),u.clip(),u.beginPath(),u.arc(T.d.centerX,T.d.centerY,w.W3,0,2*Math.PI),u.fillStyle="white",u.fill(),u.lineWidth=5,u.strokeStyle="black",u.stroke()}function C(){u.restore(),u.clearRect(0,0,c.width,c.height)}const B=JSON.parse('[{"x0":138.33333333333337,"y0":405,"x":138.33333333333337,"y":405,"dX":1,"radius":15,"speed":1,"dY":-0.5,"value":0.7,"isSelected":false,"selectionIndex":null,"isIntercepted":false,"index":0},{"x0":671.6666666666666,"y0":405,"x":671.6666666666666,"y":405,"radius":15,"speed":1,"dX":-1,"dY":-0.5,"value":0.7,"isSelected":false,"selectionIndex":null,"isIntercepted":false,"index":1},{"x0":230.49898829565421,"y0":207.30782806461622,"x":230.49898829565421,"y":207.30782806461622,"radius":15,"speed":1.0165478482376784,"dX":1.0082064777469335,"dY":0.1299585548772218,"value":0.0530352112340888,"isSelected":false,"selectionIndex":null,"isIntercepted":false,"index":2},{"x0":316.01708547114634,"y0":590.6492844115368,"x":316.01708547114634,"y":590.6492844115368,"radius":15,"speed":1.7797552251722664,"dX":1.7713592618736116,"dY":0.17267028378548002,"value":0.13081236820675715,"isSelected":false,"selectionIndex":null,"isIntercepted":false,"index":3},{"x0":355.48295941990955,"y0":197.877965044088,"x":355.48295941990955,"y":197.877965044088,"radius":15,"speed":1.7256797559093684,"dX":-1.6632722615124182,"dY":0.4598869470193552,"value":0.2697295922671397,"isSelected":false,"selectionIndex":null,"isIntercepted":false,"index":4},{"x0":408.7541907726612,"y0":666.9061445418321,"x":408.7541907726612,"y":666.9061445418321,"radius":15,"speed":1.723475045291707,"dX":1.2152263585470209,"dY":-1.2221256601658435,"value":0.2601403083080581,"isSelected":false,"selectionIndex":null,"isIntercepted":false,"index":5},{"x0":189.23042494043153,"y0":224.17650670726925,"x":189.23042494043153,"y":224.17650670726925,"radius":15,"speed":1.0964517693500966,"dX":0.4995654291238366,"dY":-0.9760332292167487,"value":0.24756332528662253,"isSelected":false,"selectionIndex":null,"isIntercepted":false,"index":6},{"x0":159.31226838836648,"y0":220.46590101924406,"x":159.31226838836648,"y":220.46590101924406,"radius":15,"speed":1.1848842694889754,"dX":0.9718705201025007,"dY":-0.6778041193723431,"value":0.07610814575575647,"isSelected":false,"selectionIndex":null,"isIntercepted":false,"index":7},{"x0":126.06112574700467,"y0":498.228382583297,"x":126.06112574700467,"y":498.228382583297,"radius":15,"speed":1.6255402795504779,"dX":1.2153303194433822,"dY":1.0795153612073762,"value":0.05390771543188341,"isSelected":false,"selectionIndex":null,"isIntercepted":false,"index":8},{"x0":677.2166245518697,"y0":407.0930255053714,"x":677.2166245518697,"y":407.0930255053714,"radius":15,"speed":1.1840172677766532,"dX":-0.4347361170172724,"dY":1.1013180280709272,"value":0.16582170577333064,"isSelected":false,"selectionIndex":null,"isIntercepted":false,"index":9}]'),O=JSON.parse('[{"x0":547.8106602102902,"y0":398.9801632996167,"x":547.8106602102902,"y":398.9801632996167,"radius":15,"speed":1.7366959366481751,"dX":-1.025702539912796,"dY":1.4014446389303865,"value":0.07594795987568147,"isSelected":false,"selectionIndex":null,"isIntercepted":false,"index":0},{"x0":250.5526376395189,"y0":310.0972637575672,"x":250.5526376395189,"y":310.0972637575672,"radius":15,"speed":1.0598801241721958,"dX":-0.9416474903067857,"dY":0.4864626209835663,"value":0.15855495509536036,"isSelected":false,"selectionIndex":null,"isIntercepted":false,"index":1},{"x0":121.76043440920319,"y0":309.31449240697043,"x":121.76043440920319,"y":309.31449240697043,"radius":15,"speed":0.8,"dX":0.4603916,"dY":-0.6544081,"value":0.6240736683550826,"isSelected":false,"selectionIndex":null,"isIntercepted":false,"index":2},{"x0":339.2572319563648,"y0":213.6981585309997,"x":339.2572319563648,"y":213.6981585309997,"radius":15,"speed":1.1411676311399788,"dX":-0.7405347077632316,"dY":0.8682579737380222,"value":0.3006747156822065,"isSelected":false,"selectionIndex":null,"isIntercepted":false,"index":3},{"x0":320.09521207542184,"y0":261.44340881664345,"x":320.09521207542184,"y":261.44340881664345,"radius":15,"speed":1.2614072503056377,"dX":1.2574713840119485,"dY":-0.09956891841686676,"value":0.07250627744719752,"isSelected":false,"selectionIndex":null,"isIntercepted":false,"index":4},{"x0":634.2566085014604,"y0":313.0083835030716,"x":634.2566085014604,"y":313.0083835030716,"radius":15,"speed":1.6360885163303465,"dX":-1.621129841636616,"dY":-0.22073438749609064,"value":0.31693400840794855,"isSelected":false,"selectionIndex":null,"isIntercepted":false,"index":5},{"x0":675.4452984716723,"y0":562.9426753824071,"x":675.4452984716723,"y":562.9426753824071,"radius":15,"speed":1.5817470529582351,"dX":-1.2132072560590332,"dY":1.0149147222243715,"value":0.13262362618338477,"isSelected":false,"selectionIndex":null,"isIntercepted":false,"index":6},{"x0":579.0909770850026,"y0":704.8156423562405,"x":579.0909770850026,"y":704.8156423562405,"radius":15,"speed":1.5924366728868335,"dX":-1.5895570356019695,"dY":0.09572349619172525,"value":0.5743589686993149,"isSelected":false,"selectionIndex":null,"isIntercepted":false,"index":7},{"x0":255.0964853059273,"y0":545.1888874191362,"x":255.0964853059273,"y":545.1888874191362,"radius":15,"speed":1.970703992759809,"dX":1.9586459503327924,"dY":0.21767009056001407,"value":0.3328790458089707,"isSelected":false,"selectionIndex":null,"isIntercepted":false,"index":8},{"x0":171.4654848358123,"y0":477.69073965385627,"x":171.4654848358123,"y":477.69073965385627,"radius":15,"speed":1.3469753998797387,"dX":0.24809452925988143,"dY":-1.3239304484875705,"value":0.5641937437598911,"isSelected":false,"selectionIndex":null,"isIntercepted":false,"index":9}]');function j(e,t){if(T.d.selectedObjects=[],T.d.hoverObjectIndex=-1,e&&t&&T.d.lastRoundObjects.length>0)T.d.objects=structuredClone(T.d.lastRoundObjects);else{T.d.objects=[];const t=T.d.NUM_OBJECTS,n=(w.vh-w.rm)*w.lx/w.mH,d=w.W3-w.W3/3,o=Math.abs(d-n*w.mu);if(e)return void(1==T.d.curTrial?T.d.objects=B:T.d.objects=O);for(let n=0;n<t;n++){let t=Y(e,o);T.d.objects.push(t)}}}function Y(e,t){let n,d,o,l,r,i=!1;do{let a=T.d.randomGenerator()*Math.PI*2,s=T.d.randomGenerator()*(w.vh-w.rm)+w.rm,c=T.d.randomGenerator()*(.6*w.W3)+w.W3/3,u=T.d.randomGenerator()*Math.PI*2;r=s*w.lx/w.mH,n=T.d.centerX+Math.cos(u)*c,d=T.d.centerY+Math.sin(u)*c,o=r*Math.cos(a),l=r*Math.sin(a);const p=n+o*w.mu,y=d+l*w.mu,m=Math.sqrt((p-T.d.centerX)**2+(y-T.d.centerY)**2);i=e?m>t+80&&m<w.W3-20:m>100&&m<w.W3-50}while(!i);let a=function(e,t){function n(e){const t=e-1/3,n=1/Math.sqrt(9*t);let d,o;for(;;){do{d=T.d.randomGenerator(),o=2*T.d.randomGenerator()-1}while(d<=0);const e=Math.pow(1+n*o,3);if(e>0&&Math.log(d)<.5*o*o+t*(1-e+Math.log(e)))return t*e}}const d=n(e);return d/(d+n(t))}(w.Iz,w.ue);return e&&(a*=.5),{x0:n,y0:d,x:n,y:d,radius:15,speed:r,dX:o,dY:l,value:a,isSelected:!1,selectionIndex:NaN,isIntercepted:!1,index:T.d.objects.length}}function R(){let e,t,n,d,o,l;t=T.d.centerX,n=T.d.centerY,e=w.vh,l=e*w.lx/w.mH,d=0,o=0,T.d.player={x0:t,y0:n,radius:15,speed:l,dX:0,dY:0,x:t,y:n}}function X(){q(T.d.totalFrames),C(),A(),P(),_(),T.d.totalFrames++,T.d.totalFrames<w.mu?T.d.animationFrameId=requestAnimationFrame(X):function(){cancelAnimationFrame(T.d.animationFrameId);let e=`<p><center>OR</center></p><p>Click on ${T.d.NUM_SELECTIONS} objects to set the interception order.</p><p>Maximize scores by intercepting objects.</p>`;T.d.isEasyMode&&(e+="<p>Scores are awarded based on how close you are to the selected objects and their values.</p>"),1==T.d.AI_HELP&&(e+="<p>The suggested AI solution is shown in blue </p>"),p.innerHTML=e,c.addEventListener("click",H),c.addEventListener("mousemove",U),I.disabled=!1,I.style.display="block",I.addEventListener("click",V),Promise.resolve().then(a.bind(a,803)).then((e=>e.enumerateAllSolutions())).then((([e,t])=>{T.d.allSolutions=e,T.d.bestSolution=t})).catch((e=>console.error("Error loading solutions:",e))),2==T.d.AI_HELP&&(v.style.display="block",v.disabled=!1),1==T.d.AI_HELP&&(T.d.canShowRequestAI=!0),T.d.lastRoundObjects=structuredClone(T.d.objects),C(),A(),P(),_()}()}function F(){q(T.d.totalFrames);let e=function(){let e=T.d.playerSolution.moves[T.d.interceptionCounter],t=T.d.playerSolution.sequence[T.d.interceptionCounter];T.d.interceptionFrame+=1;let n="in progress";if(T.d.interceptionFrame==e.timeToIntercept){if(T.d.objects[t].isIntercepted=e.success,T.d.interceptionFrame=0,T.d.interceptionCounter+=1,!(T.d.interceptionCounter<T.d.playerSolution.moves.length))return n="finished",n;e=T.d.playerSolution.moves[T.d.interceptionCounter]}return T.d.player.x+=e.dX,T.d.player.y+=e.dY,n}();C(),A(),P(),_(),T.d.totalFrames++,Math.sqrt((T.d.player.x-T.d.centerX)**2+(T.d.player.y-T.d.centerY)**2)<=w.W3&&"in progress"==e?T.d.animationFrameId=requestAnimationFrame(F):function(){console.log("Finished interception sequence"),cancelAnimationFrame(T.d.animationFrameId),T.d.curTrial===T.d.NUM_MAIN_TRIALS?g.style.display="block":h.style.display="block",p.innerHTML="<p>Interception Complete</p>";let e=Math.round(100*T.d.playerSolution.totalValueProp),t=Math.round(T.d.playerSolution.rank),n=Math.round(T.d.playerSolution.interceptedCnt),d=`<p>Your score: ${e} (Range: 0-100)</p>\n                 <p>Your choice: ${function(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`;default:return`${e}th`}}(t)} best solution</p>`;n==T.d.NUM_SELECTIONS?d="<p>Successfully intercept both selected objects</p>"+d:1==n?d="<p>Miss Object 2: out of range</p>"+d:0==n&&(d="<p>Fail to intercept either selected object</p>"+d),f.innerHTML=d,T.d.isEasyMode&&(100==e?(T.d.needRetry=!1,T.d.retryCnt=0,T.d.curTrial==T.d.NUM_EDUCATION_TRIALS&&(T.d.isEasyMode=!1,T.d.needRetry=!1,T.d.curTrial=0,T.d.retryCnt=0,console.log("show enter main game"),M.style.display="block",document.getElementById("modalInfo").innerHTML="<p>\n            Congratulations! You have completed all the trial rounds. \n            Now, proceed to the main game.\n          </p>",document.getElementById("modalOverlay").style.display="flex")):T.d.retryCnt<1?(T.d.needRetry=!0,M.style.display="block",document.getElementById("modalInfo").innerHTML="<p>\n            You did not select the best answers. <br/>\n            The best answers will be shown in blue.\n            Please try again.<br/>\n            Note: Your can earn partial score for missed interceptions.\n          </p>",document.getElementById("modalOverlay").style.display="flex"):(T.d.needRetry=!1,M.style.display="block",document.getElementById("modalInfo").innerHTML="<p>\n             Unfortunately, you did not pass the trial rounds. The game is now over.\n            </p>",document.getElementById("modalOverlay").style.display="flex",J(!1)))}()}function q(e){T.d.objects.forEach((t=>{t.x=t.x0+e*t.dX,t.y=t.y0+e*t.dY}))}function U(e){const t=c.getBoundingClientRect(),n=e.clientX-t.left,d=e.clientY-t.top;T.d.hoverObjectIndex=T.d.objects.findIndex((e=>Math.hypot(n-e.x,d-e.y)<=e.radius)),C(),A(),P(),_()}function H(e){const t=c.getBoundingClientRect(),n=e.clientX-t.left,d=e.clientY-t.top;for(let e of T.d.objects)if(Math.hypot(n-e.x,d-e.y)<=e.radius&&!e.isSelected&&T.d.selectedObjects.length<T.d.NUM_SELECTIONS){e.isSelected=!0,e.selectionIndex=T.d.selectedObjects.length,T.d.selectedObjects.push(e.index),P(),I.disabled=!0,b.style.display="block",b.disabled=!1,T.d.selectedObjects.length===T.d.NUM_SELECTIONS&&(c.removeEventListener("click",H),c.removeEventListener("mousemove",U),x.style.display="block");break}}function $(){T.d.needRetry?T.d.retryCnt++:T.d.curTrial++,T.d.canShowAnswer=!1,console.log(`------curTrail: ${T.d.curTrial}---------`),h.style.display="none",h.blur(),v.disabled=!0,p.innerHTML="<p>Please observe object values and movements carefully.</p>",f.innerHTML="",T.d.canShowRequestAI=!1,j(T.d.isEasyMode,T.d.needRetry),R(),T.d.totalFrames=0,T.d.animationFrameId=requestAnimationFrame(X)}function W(){for(let e of T.d.selectedObjects){let t=T.d.objects.find((t=>t.index===e));t&&(t.isSelected=!1,delete t.selectionIndex)}T.d.hoverObjectIndex=-1,T.d.selectedObjects=[],c.addEventListener("click",H),c.addEventListener("mousemove",U),C(),A(),P(),_(),x.style.display="none",b.disabled=!0,I.disabled=!1}function D(){b.style.display="none",x.style.display="none",I.style.display="none",v.style.display="none",T.d.playerSolution=(0,N.lookupInterceptionPaths)(),T.d.interceptionCounter=0,T.d.interceptionFrame=0,p.innerHTML="<p>Interception sequence in progress...</p>",T.d.canShowRequestAI=!1,T.d.animationFrameId=requestAnimationFrame(F)}function V(){T.d.canShowRequestAI=!1,I.disabled=!0,T.d.totalFrames=0,T.d.animationFrameId=requestAnimationFrame(X)}function G(){2==T.d.AI_HELP&&(T.d.canShowRequestAI=!0,C(),A(),P(),_())}function J(e){console.log("Game finished"),cancelAnimationFrame(T.d.animationFrameId),s.style.display="none",e&&(Promise.all([a.e(561),a.e(730)]).then(a.bind(a,730)).then((e=>e.saveTrialData())),fetch("feedback.html").then((e=>e.text())).then((e=>{L.innerHTML=e,L.style.display="block";const t=document.getElementById("aiFeedback"),n=document.getElementById("freeResponse"),d=document.getElementById("charCount"),o=document.getElementById("submitFeedback"),l=document.querySelectorAll("input[type='radio']"),r=document.getElementById("thankYouMessage");function i(){const e=(0===T.d.AI_HELP?["1-1","1-2","1-3","1-4"]:[...new Set([...l].map((e=>e.name)))]).every((e=>document.querySelector(`input[name="${e}"]:checked`)));o.disabled=!e}0!==T.d.AI_HELP&&(t.style.display="block"),l.forEach((e=>{e.addEventListener("change",i)})),n&&d&&n.addEventListener("input",(()=>{d.textContent=`${n.value.length} / 500`})),o&&(o.disabled=!0,o.addEventListener("click",(()=>function(e,t,n){let d={choices:{},freeResponse:e.value.trim()};document.querySelectorAll("input[type='radio']:checked").forEach((e=>{d.choices[e.name]=e.value})),console.log("ðŸ“Œ User Feedback:",d),t.disabled=!0,n.style.display="block"}(n,o,r))))})))}if("localhost"===window.location.hostname){const e=new URL(window.location.href);e.searchParams.set("DEBUG","true"),window.history.replaceState({},"",e)}let z=function(){const e=new URLSearchParams(window.location.search),t={};for(const[n,d]of e.entries())t[n]=d;return t}();function K(){(function(e){0==T.d.AI_HELP?(m.style.display="none",y.innerHTML="<p>AI assistance will not be available in this session. </p>"):1==T.d.AI_HELP?y.innerHTML="<p>AI assistance will be available in this session. </p>":2==T.d.AI_HELP&&(y.innerHTML="<p>AI assistance is available on request in this session. </p>");const t=Array.from({length:T.d.NUM_OBJECTS},((e,t)=>t));T.d.permutations=(0,N.generatePermutations)(t,T.d.NUM_SELECTIONS),T.d.randomGenerator=function(e){const t=Math.pow(2,32);let n=e;return function(){return n=(1664525*n+1013904223)%t,n/t}}(e),p.innerHTML="<p>Press the button to start. Please observe the sequence carefully.</p>",C(),A(),h.style.display="block"})(w.j2),h.addEventListener("click",$),b.addEventListener("click",W),x.addEventListener("click",D),v.addEventListener("click",G),g.addEventListener("click",(()=>{J(!0)}))}void 0!==z.NUM_SELECTIONS&&(T.d.NUM_SELECTIONS=Number(z.NUM_SELECTIONS)),void 0!==z.NUM_TRIALS&&(T.d.NUM_MAIN_TRIALS=Number(z.NUM_TRIALS)),void 0!==z.NUM_OBJECTS&&(T.d.NUM_OBJECTS=Number(z.NUM_OBJECTS)),void 0!==z.AI_HELP&&(T.d.AI_HELP=Number(z.AI_HELP)),void 0!==z.DEBUG&&(T.d.isDebugMode=z.DEBUG),k.K.prolific_pid=function(e=16){let t="";const n=new Uint8Array(e);window.crypto.getRandomValues(n);for(let d=0;d<e;d++)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"[n[d]%62];return t}(),void 0!==z.PROLIFIC_PID&&(k.K.prolific_pid=Number(z.PROLIFIC_PID)),fetch("consent.html").then((e=>e.text())).then((e=>{E.innerHTML=e;const t=document.getElementById("confirmParticipation"),n=document.getElementById("proceedButton");t.addEventListener("change",(function(){n.disabled=!this.checked})),n.addEventListener("click",(function(){E.style.display="none",fetch("instructions.html").then((e=>e.text())).then((e=>{S.innerHTML=e,S.style.display="block";const t=document.getElementById("prevInstructionBtn"),n=document.getElementById("nextInstructionBtn");let d=1;function o(e){console.log("currentPage:",d,"totalPages:",8);for(let e=1;e<=8;e++)document.getElementById("instructionPage-"+e).classList.remove("active");document.getElementById("instructionPage-"+e).classList.add("active"),1===e?(t.disabled=!0,t.hidden=!0):(t.disabled=!1,t.hidden=!1)}t.addEventListener("click",(function(){d>1&&(d--,o(d))})),n.addEventListener("click",(function(){d<8?(d++,o(d)):(S.style.display="none",s.style.display="block",T.d.isEasyMode=!0,fetch("modal.html").then((e=>e.text())).then((e=>{M.innerHTML=e,M.style.display="block",document.getElementById("modalInfo").innerHTML=`<p>\n          Now, you will play ${T.d.NUM_EDUCATION_TRIALS} trial rounds. Please carefully read the\n          instructions and make your choices.\n        </p>`;const t=document.getElementById("modalOverlay"),n=document.getElementById("closeModal");t.style.display="flex",n.addEventListener("click",(()=>{t.style.display="none",T.d.needRetry&&(T.d.canShowAnswer=!0,j(T.d.isEasyMode,T.d.needRetry),R(),C(),A(),P(),_(),p.innerHTML="<p>\n            You did not select the best answers. <br/>\n            The best answers are displayed as blue numbers. <br/>\n            Please carefully try again in the next sequence.\n          </p>")}))})),K())}))}))}))}))})();